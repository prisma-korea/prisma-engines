<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `query_engine_tests` crate."><meta name="keywords" content="rust, rustlang, rust-lang, query_core"><title>query_engine_tests::query_core - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-93196c7a1c3542a8.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../crates.js"></script><script defer src="../../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../query_engine_tests/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../query_engine_tests/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate query_core</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a href="../index.html">query_engine_tests</a>::<wbr><a class="mod" href="#">query_core</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/query_core/lib.rs.html#1-45">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="constants/index.html" title="query_engine_tests::query_core::constants mod">constants</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="executor/index.html" title="query_engine_tests::query_core::executor mod">executor</a></div><div class="item-right docblock-short">What the executor module DOES:</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="protocol/index.html" title="query_engine_tests::query_core::protocol mod">protocol</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="query_document/index.html" title="query_engine_tests::query_core::query_document mod">query_document</a></div><div class="item-right docblock-short">Intermediate representation of the input document that is used by the query engine to build
query ASTs and validate the incoming data.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="query_graph_builder/index.html" title="query_engine_tests::query_core::query_graph_builder mod">query_graph_builder</a></div><div class="item-right docblock-short">Query graph builder module.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="response_ir/index.html" title="query_engine_tests::query_core::response_ir mod">response_ir</a></div><div class="item-right docblock-short">Prisma Response IR (Intermediate Representation).</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="schema/index.html" title="query_engine_tests::query_core::schema mod">schema</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="schema_builder/index.html" title="query_engine_tests::query_core::schema_builder mod">schema_builder</a></div><div class="item-right docblock-short">Query schema builder. Root for query schema building.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="telemetry/index.html" title="query_engine_tests::query_core::telemetry mod">telemetry</a></div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.BatchDocumentTransaction.html" title="query_engine_tests::query_core::BatchDocumentTransaction struct">BatchDocumentTransaction</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CompactedDocument.html" title="query_engine_tests::query_core::CompactedDocument struct">CompactedDocument</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExtendedTransactionUserFacingError.html" title="query_engine_tests::query_core::ExtendedTransactionUserFacingError struct">ExtendedTransactionUserFacingError</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FieldConversionError.html" title="query_engine_tests::query_core::FieldConversionError struct">FieldConversionError</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.In.html" title="query_engine_tests::query_core::In struct">In</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Selection.html" title="query_engine_tests::query_core::Selection struct">Selection</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TransactionOptions.html" title="query_engine_tests::query_core::TransactionOptions struct">TransactionOptions</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxId.html" title="query_engine_tests::query_core::TxId struct">TxId</a></div><div class="item-right docblock-short">How Interactive Transactions work
The Interactive Transactions (iTx) follow an actor model design. Where each iTx is created in its own process.
When a prisma client requests to start a new transaction, the Transaction Actor Manager spawns a new ITXServer. The ITXServer runs in its own
process and waits for messages to arrive via its receive channel to process.
The Transaction Actor Manager will also create an ITXClient and add it to hashmap managed by an RwLock. The ITXClient is the only way to communicate
with the ITXServer.
Once the prisma client receives the iTx Id it can perform database operations using that iTx id. When an operation request is received by the
TransactionActorManager, it looks for the client in the hashmap and passes the operation to the client. The ITXClient sends a message to the
ITXServer and waits for a response. The ITXServer will then perform the operation and return the result. The ITXServer will perform one
operation at a time. All other operations will sit in the message queue waiting to be processed.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ArgumentValue.html" title="query_engine_tests::query_core::ArgumentValue enum">ArgumentValue</a></div><div class="item-right docblock-short">Represents the input values in a Document.
This abstraction is mostly there to hold special kind of values such as <code>FieldRef</code> which have to be disambiguated at query-validation time.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.BatchDocument.html" title="query_engine_tests::query_core::BatchDocument enum">BatchDocument</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CoreError.html" title="query_engine_tests::query_core::CoreError enum">CoreError</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Operation.html" title="query_engine_tests::query_core::Operation enum">Operation</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.QueryDocument.html" title="query_engine_tests::query_core::QueryDocument enum">QueryDocument</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.SelectionSet.html" title="query_engine_tests::query_core::SelectionSet enum">SelectionSet</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.TransactionError.html" title="query_engine_tests::query_core::TransactionError enum">TransactionError</a></div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.QueryExecutor.html" title="query_engine_tests::query_core::QueryExecutor trait">QueryExecutor</a></div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ArgumentValueObject.html" title="query_engine_tests::query_core::ArgumentValueObject type">ArgumentValueObject</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Result.html" title="query_engine_tests::query_core::Result type">Result</a></div><div class="item-right docblock-short">Result type tying all sub-result type hierarchies of the core together.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.SelectionArgument.html" title="query_engine_tests::query_core::SelectionArgument type">SelectionArgument</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="query_engine_tests" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0 (2c8cc3432 2023-03-06)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-08ddfdda51b8ee2e.css" ></div></body></html>